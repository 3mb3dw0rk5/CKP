<html ng-app="keepassApp" ng-csp>
	<head>
		<title>KeePass - Choose password file</title>
		<link rel="stylesheet" href="animate.css" />
		<link rel="stylesheet" href="pure.min.css" />
		<link rel="stylesheet" href="popup.css" />
		<link rel="stylesheet" href="angular-csp.css" />
		<script type="text/javascript" src="/lib/util.js"></script>
		<script type="text/javascript" src="/lib/angular.min.js"></script>
		<script type="text/javascript" src="/lib/angular-animate.min.js"></script>
		<script type="text/javascript" src="/lib/gdocs.js"></script>
		<script type="text/javascript" src="/lib/pako.min.js"></script>
		<script type="text/javascript" src="/lib/salsa20.js"></script>
		<script type="text/javascript" src="/lib/stringview.js"></script>
		<script type="text/javascript" src="keepassService.js"></script>
		<script type="text/javascript" src="popup.js"></script>
		<script type="text/javascript" src="docsController.js"></script>
		<script type="text/javascript" src="masterPasswordController.js"></script>
	</head>
	<body ng-controller="DocsController">
		<docs ng-hide="fileName" class="pure-form">
			<infoMessage ng-hide="authorized()"><p>This extension works with your already-existing Keepass (.kdbx) files stored in your google drive.  Click the button below to login to your drive.</p>
			<p>Chrome will ask you to allow this extension to access the Google Drive websites, and Google Drive will ask you to allow this extension to read your files.</p></infoMessage>
			<button class="pure-button" ng-hide="authorized()" ng-click="authorize()"><svg class="icon icon-google"><use xlink:href="#icon-google"></use></svg>Authorize</button>
			<button class="pure-button" ng-click="fetchDocs(false)" ng-show="authorized()"><svg class="icon icon-google"><use xlink:href="#icon-google"></use></svg>Refresh</button>
			<button class="pure-button" ng-show="authorized()" ng-click="logout()"><svg class="icon icon-lock"><use xlink:href="#icon-lock"></use></svg>Deauthorize</button>
			<busyMessage ng-show="busy"></busyMessage>
			<errorMessage ng-show="errorMessage">{{errorMessage}}</errorMessage>
			<successMessage ng-show="successMessage">{{successMessage}}</successMessage>
			<fieldset ng-show="authorized() && docs && docs.length">
			  <legend>Choose a password file:</legend>
  			<filelist>
    			<ul>
    				<li ng-repeat="doc in docs" ng-click="choosePasswordFile(doc)">
    					{{doc.title}}
    				</li>
    			</ul>
  			</filelist>
			</fieldset>
			<errorMessage ng-show="!refreshing && authorized() && (docs == null || docs.length == 0)">Chrome-keepass has accessed your drive but could not find any password files.  Ensure your .kdbx file is in the root folder of your google drive.</errorMessage>
		</docs>
		<passwords ng-show="fileName">
		  <statusMessage>{{fileName}}
		    <a href="" ng-click="chooseAnotherDoc()" style="float: right;">Choose a different File</a>
		  </statusMessage>
			<div ng-controller="MasterPasswordController">
			  <form action="#" name="pwd" class="pure-form" ng-show="!entries">
    			<fieldset>
    			 <legend>Enter master password to unlock your password file</legend>
    				<input type="password" placeholder="Master Password" ng-model="masterPassword" ng-keyup="clearMessages()" ng-readonly="busy">
    				<button type="submit" id="submitPassword" class="pure-button pure-button-primary" ng-click="enterMasterPassword()" ng-disabled="busy">
    					Enter
    				</button>
    				<busyMessage ng-show="busy">Unlocking password file...</busyMessage>
    			</fieldset>
				</form>
  			<pageInfo ng-show="entries && (url || title)">{{title}} - {{url}}</pageInfo>
				<errorMessage ng-show="errorMessage">{{errorMessage}}</errorMessage>
  			<table ng-show="entries" class="pure-table pure-table-horizontal">
  			  <thead><tr>
  			    <th>Entry</th>
  			    <th>Username</th>
  			    <th>Password</th>
  			  </tr></thead>
  			  <tbody>
  			    <tr ng-repeat="entry in entries" title="{{entry.Notes}}">
  			      <td>{{entry.Title || entry.Url}}</td>
  			      <td>{{entry.UserName}}</td>
  			      <td>
  			         <a href="" ng-click="copyPassword(entry)" title="Copy password to clipboard" ng-hide="entry.copied"><svg class="icon icon-copy"><use xlink:href="#icon-copy"></use></svg></a>
  			         <span ng-show="entry.copied">Copied</span>
  			      </td>
  			    </tr>
			    </tbody>
  			</table>
				<successMessage ng-show="successMessage">{{successMessage}}</successMessage>
			</div>
		</passwords>
<svg display="none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<symbol id="icon-lock" viewBox="0 0 658 1024">
	<title>lock</title>
	<path class="path1" d="M182.857 438.857h292.571v-109.714q0-60.571-42.857-103.429t-103.429-42.857-103.429 42.857-42.857 103.429v109.714zM658.286 493.714v329.143q0 22.857-16 38.857t-38.857 16h-548.571q-22.857 0-38.857-16t-16-38.857v-329.143q0-22.857 16-38.857t38.857-16h18.286v-109.714q0-105.143 75.429-180.571t180.571-75.429 180.571 75.429 75.429 180.571v109.714h18.286q22.857 0 38.857 16t16 38.857z"></path>
</symbol>
<symbol id="icon-times-circle" viewBox="0 0 1024 1024">
	<title>times-circle</title>
	<path class="path1" d="M656.571 641.143q0-14.857-10.857-25.714l-103.429-103.429 103.429-103.429q10.857-10.857 10.857-25.714 0-15.429-10.857-26.286l-51.429-51.429q-10.857-10.857-26.286-10.857-14.857 0-25.714 10.857l-103.429 103.429-103.429-103.429q-10.857-10.857-25.714-10.857-15.429 0-26.286 10.857l-51.429 51.429q-10.857 10.857-10.857 26.286 0 14.857 10.857 25.714l103.429 103.429-103.429 103.429q-10.857 10.857-10.857 25.714 0 15.429 10.857 26.286l51.429 51.429q10.857 10.857 26.286 10.857 14.857 0 25.714-10.857l103.429-103.429 103.429 103.429q10.857 10.857 25.714 10.857 15.429 0 26.286-10.857l51.429-51.429q10.857-10.857 10.857-26.286zM877.714 512q0 119.429-58.857 220.286t-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286 58.857-220.286 159.714-159.714 220.286-58.857 220.286 58.857 159.714 159.714 58.857 220.286z"></path>
</symbol>
<symbol id="icon-check-circle" viewBox="0 0 1024 1024">
	<title>check-circle</title>
	<path class="path1" d="M733.714 419.429q0-16-10.286-26.286l-52-51.429q-10.857-10.857-25.714-10.857t-25.714 10.857l-233.143 232.571-129.143-129.143q-10.857-10.857-25.714-10.857t-25.714 10.857l-52 51.429q-10.286 10.286-10.286 26.286 0 15.429 10.286 25.714l206.857 206.857q10.857 10.857 25.714 10.857 15.429 0 26.286-10.857l310.286-310.286q10.286-10.286 10.286-25.714zM877.714 512q0 119.429-58.857 220.286t-159.714 159.714-220.286 58.857-220.286-58.857-159.714-159.714-58.857-220.286 58.857-220.286 159.714-159.714 220.286-58.857 220.286 58.857 159.714 159.714 58.857 220.286z"></path>
</symbol>
<symbol id="icon-eye" viewBox="0 0 1024 1024">
	<title>eye</title>
	<path class="path1" d="M950.857 548.571q-86.857-134.857-217.714-201.714 34.857 59.429 34.857 128.571 0 105.714-75.143 180.857t-180.857 75.143-180.857-75.143-75.143-180.857q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 76 117.143 190.571 186.571t248.286 69.429 248.286-69.429 190.571-186.571zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM1024 548.571q0 19.429-11.429 39.429-80 131.429-215.143 210.571t-285.429 79.143-285.429-79.429-215.143-210.286q-11.429-20-11.429-39.429t11.429-39.429q80-130.857 215.143-210.286t285.429-79.429 285.429 79.429 215.143 210.286q11.429 20 11.429 39.429z"></path>
</symbol>
<symbol id="icon-eye-slash" viewBox="0 0 1024 1024">
	<title>eye-slash</title>
	<path class="path1" d="M317.143 762.857l44.571-80.571q-49.714-36-77.714-90.857t-28-116q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 95.429 147.429 244 214.286zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM746.857 220q0 4-0.571 5.143-60 107.429-180 323.429t-180.571 324l-28 50.857q-5.714 9.143-16 9.143-6.857 0-76.571-40-9.143-5.714-9.143-16 0-6.857 25.143-49.714-81.714-37.143-150.571-98.857t-119.143-140q-11.429-17.714-11.429-39.429t11.429-39.429q87.429-134.286 217.143-212t283.429-77.714q50.857 0 102.857 9.714l30.857-55.429q5.714-9.143 16-9.143 2.857 0 10.286 3.429t17.714 8.857 18.857 10.571 18 10.571 11.143 6.571q9.143 5.714 9.143 15.429zM768 475.429q0 79.429-45.143 144.857t-119.429 94l160-286.857q4.571 25.714 4.571 48zM1024 548.571q0 20-11.429 39.429-22.286 36.571-62.286 82.857-85.714 98.286-198.571 152.571t-239.714 54.286l42.286-75.429q121.143-10.286 224.286-78.286t172.286-175.429q-65.714-102.286-161.143-168l36-64q54.286 36.571 104.286 87.429t82.571 105.143q11.429 19.429 11.429 39.429z"></path>
</symbol>
<symbol id="icon-key" viewBox="0 0 1024 1024">
	<title>key</title>
	<path class="path1" d="M475.429 292.571q0-45.714-32-77.714t-77.714-32-77.714 32-32 77.714q0 24 10.857 47.429-23.429-10.857-47.429-10.857-45.714 0-77.714 32t-32 77.714 32 77.714 77.714 32 77.714-32 32-77.714q0-24-10.857-47.429 23.429 10.857 47.429 10.857 45.714 0 77.714-32t32-77.714zM961.714 694.857q0 9.714-28 37.714t-37.714 28q-5.143 0-16.286-9.143t-20.857-18.857-22-22.857-14-14.857l-54.857 54.857 125.714 125.714q16 16 16 38.857 0 24-22.286 46.286t-46.286 22.286q-22.857 0-38.857-16l-383.429-383.429q-100.571 74.857-208.571 74.857-93.143 0-151.714-58.571t-58.571-151.714q0-91.429 54.286-178.857t141.714-141.714 178.857-54.286q93.143 0 151.714 58.571t58.571 151.714q0 108-74.857 208.571l202.857 202.857 54.857-54.857q-1.714-1.714-14.857-14t-22.857-22-18.857-20.857-9.143-16.286q0-9.714 28-37.714t37.714-28q7.429 0 13.143 5.714 3.429 3.429 26.286 25.429t46.857 45.429 49.429 49.143 41.714 44.571 16.286 23.429z"></path>
</symbol>
<symbol id="icon-unlock" viewBox="0 0 951 1024">
	<title>unlock</title>
	<path class="path1" d="M950.857 329.143v146.286q0 14.857-10.857 25.714t-25.714 10.857h-36.571q-14.857 0-25.714-10.857t-10.857-25.714v-146.286q0-60.571-42.857-103.429t-103.429-42.857-103.429 42.857-42.857 103.429v109.714h54.857q22.857 0 38.857 16t16 38.857v329.143q0 22.857-16 38.857t-38.857 16h-548.571q-22.857 0-38.857-16t-16-38.857v-329.143q0-22.857 16-38.857t38.857-16h384v-109.714q0-105.714 75.143-180.857t180.857-75.143 180.857 75.143 75.143 180.857z"></path>
</symbol>
<symbol id="icon-copy" viewBox="0 0 1024 1024">
	<title>copy</title>
	<path class="path1" d="M969.143 219.429q22.857 0 38.857 16t16 38.857v694.857q0 22.857-16 38.857t-38.857 16h-548.571q-22.857 0-38.857-16t-16-38.857v-164.571h-310.857q-22.857 0-38.857-16t-16-38.857v-384q0-22.857 11.429-50.286t27.429-43.429l233.143-233.143q16-16 43.429-27.429t50.286-11.429h237.714q22.857 0 38.857 16t16 38.857v187.429q38.857-22.857 73.143-22.857h237.714zM658.286 341.143l-170.857 170.857h170.857v-170.857zM292.571 121.714l-170.857 170.857h170.857v-170.857zM404.571 491.429l180.571-180.571v-237.714h-219.429v237.714q0 22.857-16 38.857t-38.857 16h-237.714v365.714h292.571v-146.286q0-22.857 11.429-50.286t27.429-43.429zM950.857 950.857v-658.286h-219.429v237.714q0 22.857-16 38.857t-38.857 16h-237.714v365.714h512z"></path>
</symbol>
<symbol id="icon-google" viewBox="0 0 731 1024">
	<title>google</title>
	<path class="path1" d="M560.571 765.143q0-14.286-4-28t-8.286-24-15.429-23.714-16.857-20-22-19.714-20.857-16.571-23.714-17.143-20.857-14.857q-9.143-1.143-28-1.143-30.286 0-59.714 4t-61.143 14.286-55.429 26.286-39.143 42.571-15.429 60.286q0 32 13.429 58.286t34.857 43.143 49.714 28.571 57.143 16.571 58 4.857q33.143 0 63.714-7.429t56.571-22.286 41.714-41.714 15.714-62.286zM493.714 274.857q0-33.714-9.714-71.714t-27.429-73.714-48-59.143-66.857-23.429q-24 0-47.143 11.143t-38 30q-26.286 33.714-26.286 91.429 0 26.286 5.714 55.714t18 58.857 29.714 52.857 42.857 38.286 55.143 14.857q21.143 0 44.286-9.429t37.429-24.857q30.286-32 30.286-90.857zM429.714 0h238.286l-78.286 50.286h-75.429q42.857 36 64.571 76t21.714 91.429q0 41.143-14 74t-34 53.143-39.714 37.143-33.714 35.143-14 37.714q0 20.571 18.286 40.286t44 38.857 51.714 42 44.286 59.429 18.286 81.143q0 52-28 98.857-40.571 69.714-119.714 102.571t-170.571 32.857q-75.429 0-140.857-23.714t-98.571-78.571q-20.571-33.714-20.571-74.857 0-46.286 25.429-85.714t67.714-65.714q74.857-46.857 230.857-57.143-18.286-23.429-27.143-42t-8.857-42q0-22.857 12-48.571-26.286 2.286-38.857 2.286-84.571 0-142.571-55.143t-58-139.714q0-46.857 20.571-90.857t56.571-74.857q43.429-37.714 104-56t124.571-18.286z"></path>
</symbol>
<symbol id="icon-key2" viewBox="0 0 1024 1024">
	<title>key2</title>
	<path class="path1" d="M704.128 0c-176.736 0-320 143.296-320 320 0 41.12 8.608 80.032 22.816 116.128l-388.768 388.736c-11.232 11.264-18.176 21.952-18.176 39.136v96c0 34.24 29.728 64 64 64h96c17.152 0 28-6.88 39.232-18.048l45.92-45.952h74.976c35.328 0 64-28.672 64-64v-64h64c35.328 0 64-28.672 64-64v-75.008l75.808-75.872c36.128 14.24 75.008 22.88 116.192 22.88 176.672 0 320-143.296 320-320s-143.328-320-320-320zM704.128 576c-47.36 0-91.264-13.76-129.312-36.224l-11.008 10.976-96.96 96.992c-12 12-18.752 28.256-18.752 45.248v75.008h-64c-35.328 0-64 28.64-64 64v64h-74.944c-16.96 0-33.248 6.752-45.248 18.752l-45.376 45.376-90.432-0.128-0.096-91.2 373.28-372.608c0 0 0 0.032 0.032 0.064l47.008-47.008c-22.464-38.048-36.224-81.92-36.224-129.28 0-141.376 114.656-256 256-256s256 114.624 256 256-114.592 256.032-255.968 256.032zM890.24 263.648c-35.872-49.984-79.552-93.6-129.76-129.728-8.16-5.92-18.72-7.392-28.224-4.064-44.448 15.648-74.88 46.048-90.432 90.496-1.184 3.328-1.76 6.784-1.76 10.208 0 6.368 1.984 12.672 5.824 18.016 36 50.048 79.616 93.696 129.696 129.696 8.192 5.888 18.688 7.392 28.192 4.096 44.512-15.552 74.944-46.016 90.56-90.496 1.184-3.328 1.76-6.784 1.76-10.208-0.032-6.368-2.048-12.672-5.856-18.016zM794.24 352.32c-47.296-34.016-88.48-75.2-122.24-121.376 12.384-35.296 35.552-58.464 69.824-71.072 47.328 34.080 88.448 75.168 122.112 121.952-12.512 35.040-35.616 58.080-69.696 70.496z"></path>
</symbol>
<symbol id="icon-lock2" viewBox="0 0 1024 1024">
	<title>lock2</title>
	<path class="path1" d="M800 416v-128c0-159.072-128.928-288-288-288s-288 128.928-288 288v128c-53.024 0-96 42.976-96 96v224c0 159.072 128.928 288 288 288h192c159.072 0 288-128.928 288-288v-224c0-53.056-43.008-96-96-96zM288 288c0-123.712 100.288-224 224-224s224 100.288 224 224v128h-64v-127.936c0-88.384-71.616-160-160-160s-160 71.616-160 160v127.936h-64v-128zM640 288v128h-256v-128c0-70.688 57.312-128 128-128s128 57.312 128 128zM832 608v128c0 123.488-100.512 224-224 224h-192c-123.488 0-224-100.512-224-224v-224c0-17.664 14.336-32 32-32 21.344 0 42.656 0 64 0h448c21.312 0 42.624 0 64 0 17.632 0 32 14.336 32 32v96zM512 608c35.328 0 64 28.64 64 64 0 19.488-10.496 56.576-21.312 85.824-8.736 23.616-17.664 42.112-42.688 42.112-23.008 0-33.952-18.688-42.656-42.432-10.688-29.184-21.344-66.080-21.344-85.504 0-35.36 28.672-64 64-64z"></path>
</symbol>
<symbol id="icon-eye2" viewBox="0 0 1024 1024">
	<title>eye2</title>
	<path class="path1" d="M1022.88 504.832c-0.32-1.344-0.128-2.784-0.64-4.096-0.192-0.544-0.672-0.832-0.864-1.344-0.32-0.768-0.256-1.632-0.672-2.368-92.8-177.632-294.816-304.896-507.936-304.896-213.152 0-415.136 127.072-508 304.672-0.416 0.736-0.352 1.6-0.672 2.368-0.224 0.512-0.672 0.8-0.864 1.344-0.512 1.312-0.32 2.752-0.64 4.096-0.576 2.4-1.12 4.704-1.12 7.168s0.576 4.736 1.12 7.168c0.32 1.344 0.128 2.784 0.64 4.096 0.192 0.544 0.672 0.832 0.864 1.344 0.32 0.768 0.256 1.632 0.672 2.368 92.832 177.632 294.848 304.896 508 304.896 213.12 0 415.136-127.072 507.936-304.672 0.448-0.736 0.384-1.6 0.672-2.368 0.192-0.512 0.672-0.8 0.864-1.344 0.512-1.312 0.32-2.752 0.64-4.096 0.544-2.432 1.12-4.736 1.12-7.168s-0.576-4.768-1.12-7.168zM512.736 767.616c-179.68 0-355.584-102.112-443.232-255.84 88.128-153.92 263.776-255.68 443.232-255.68 179.616 0 355.552 102.144 443.2 255.84-88.128 153.952-263.744 255.68-443.2 255.68zM512.736 383.968c8.832 0 15.936 7.136 15.936 16 0 8.8-7.136 15.968-15.936 15.968v0.032c-52.928 0-95.968 43.040-95.968 95.904 0 8.832-7.168 16-15.968 16-8.832 0-16-7.168-16-16 0-70.56 57.184-127.744 127.744-127.872 0.064 0 0.128-0.032 0.192-0.032zM512 288c-123.744 0-224 100.288-224 224s100.288 224 224 224c123.68 0 224-100.32 224-224 0-123.744-100.32-224-224-224zM512 704c-105.888 0-192-86.112-192-192s86.112-192 192-192c105.888 0 192 86.112 192 192s-86.112 192-192 192z"></path>
</symbol>
</defs>
</svg>

	</body>
</html>